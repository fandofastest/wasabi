import validateFilterResult from '../_helper/validateFilterResult'
import FullStaticSearch from '../../src/FullStaticSearch'

describe('filter.string', () => {
  it('should return when match', () => {
    const list = [{ name: 'padme amidala' }]
    const results = new FullStaticSearch(list).filter('padme amidala')

    validateFilterResult(list, [0], results)
  })

  it('should return when contains', () => {
    const list = [{ name: 'padme amidala' }]
    const results = new FullStaticSearch(list).filter('amid')

    validateFilterResult(list, [0], results)
  })

  it('should return when starts', () => {
    const list = [{ name: 'padme amidala' }]
    const results = new FullStaticSearch(list).filter('padm')

    validateFilterResult(list, [0], results)
  })

  it('should not return when does not contains', () => {
    const list = [{ name: 'padme amidala' }]
    const results = new FullStaticSearch(list).filter('anakin')

    validateFilterResult(list, [], results)
  })

  it('should return only first result', () => {
    const list = [
      { name: 'sith vader' },
      { name: 'sith maul' }
    ]
    const results = new FullStaticSearch(list).filter('vader')

    validateFilterResult(list, [0], results)
  })

  it('should return only second result', () => {
    const list = [
      { name: 'sith vader' },
      { name: 'sith maul' }
    ]
    const results = new FullStaticSearch(list).filter('maul')

    validateFilterResult(list, [1], results)
  })

  it('should not return results', () => {
    const list = [
      { name: 'sith vader' },
      { name: 'sith maul' }
    ]
    const results = new FullStaticSearch(list).filter('sidious')

    validateFilterResult(list, [], results)
  })

  it('should return both - match and match', () => {
    const list = [
      { name: 'vader' },
      { name: 'vader' }
    ]
    const results = new FullStaticSearch(list).filter('vader')

    validateFilterResult(list, [0, 1], results)
  })

  it('should return both - contains and match', () => {
    const list = [
      { name: 'sith vader' },
      { name: 'sith' }
    ]
    const results = new FullStaticSearch(list).filter('sith')

    validateFilterResult(list, [1, 0], results)
  })

  it('should return both - match and contains', () => {
    const list = [
      { name: 'sith' },
      { name: 'sith dookan' }
    ]
    const results = new FullStaticSearch(list).filter('sith')

    validateFilterResult(list, [0, 1], results)
  })

  it('should return both - contains and contains', () => {
    const list = [
      { name: 'dookan' },
      { name: 'dookan' }
    ]
    const results = new FullStaticSearch(list).filter('dookan')

    validateFilterResult(list, [0, 1], results)
  })
})